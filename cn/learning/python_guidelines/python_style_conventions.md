---
layout: learning-post-layout
title: "Python é£æ ¼è§„èŒƒ"
date: 2025-12-30
lang: zh-CN
topic_url: /cn/learning/python.html
translate_url: /learning/python/style_conventions.html
mathjax: false
---

## åˆ†å·

> ğŸ’¡ **æç¤º**: ä¸è¦åœ¨è¡Œå°¾åŠ åˆ†å·, ä¹Ÿä¸è¦ç”¨åˆ†å·å°†ä¸¤æ¡è¯­å¥åˆå¹¶åˆ°ä¸€è¡Œ.

## è¡Œå®½

> ğŸ’¡ **æç¤º**: æœ€å¤§è¡Œå®½æ˜¯ 80 ä¸ªå­—ç¬¦.

**ä¾‹å¤–**:

1. é•¿çš„å¯¼å…¥ (import) è¯­å¥.
2. æ³¨é‡Šé‡Œçš„ URLã€è·¯å¾„åä»¥åŠé•¿çš„æ ‡å¿— (flag).
3. ä¸ä¾¿äºæ¢è¡Œã€ä¸åŒ…å«ç©ºæ ¼ã€æ¨¡å—çº§çš„é•¿å­—ç¬¦ä¸²å¸¸é‡, æ¯”å¦‚ URL æˆ–è·¯å¾„å.
4. Pylint ç¦ç”¨æ³¨é‡Š. (ä¾‹å¦‚: `# pylint: disable=invalid-name`)

ä¸è¦ç”¨åæ–œæ è¡¨ç¤º [æ˜¾å¼ç»­è¡Œ (explicit line continuation)](https://docs.python.org/3/reference/lexical_analysis.html#explicit-line-joining).

åº”è¯¥åˆ©ç”¨ Python çš„ [åœ†æ‹¬å·, ä¸­æ‹¬å·å’ŒèŠ±æ‹¬å·çš„éšå¼ç»­è¡Œ (implicit line joining)](https://docs.python.org/2/reference/lexical_analysis.html#implicit-line-joining) . å¦‚æœ‰éœ€è¦, ä½ å¯ä»¥åœ¨è¡¨è¾¾å¼å¤–å›´æ·»åŠ ä¸€å¯¹æ‹¬å·. 

**âœ… æ­£ç¡®**:

```python
foo_bar(self, width, height, color='é»‘', design=None, x='foo',
        emphasis=None, highlight=0)

if (width == 0 and height == 0 and
    color == 'çº¢' and emphasis == 'åŠ ç²—'):

(bridge_questions.clarification_on
 .average_airspeed_of.unladen_swallow) = 'ç¾å›½çš„è¿˜æ˜¯æ¬§æ´²çš„?'

with (
    very_long_first_expression_function() as spam,
    very_long_second_expression_function() as beans,
    third_thing() as eggs,
):
    place_order(eggs, beans, spam, beans)
```

**âŒ é”™è¯¯**:

```python
if width == 0 and height == 0 and \
    color == 'çº¢' and emphasis == 'åŠ ç²—':

bridge_questions.clarification_on \
    .average_airspeed_of.unladen_swallow = 'ç¾å›½çš„è¿˜æ˜¯æ¬§æ´²çš„?'

with very_long_first_expression_function() as spam, \
        very_long_second_expression_function() as beans, \
        third_thing() as eggs:
    place_order(eggs, beans, spam, beans)
```

å¦‚æœå­—ç¬¦ä¸²çš„å­—é¢é‡ (literal) è¶…è¿‡ä¸€è¡Œ, åº”è¯¥ç”¨åœ†æ‹¬å·å®ç°éšå¼ç»­è¡Œ:

```python
x = ('è¿™æ˜¯ä¸€ä¸ªå¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿'
     'å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿çš„å­—ç¬¦ä¸²')
```

æœ€å¥½åœ¨æœ€å¤–å±‚çš„è¯­æ³•ç»“æ„ä¸Šåˆ†è¡Œ. å¦‚æœä½ éœ€è¦å¤šæ¬¡æ¢è¡Œ, åº”è¯¥åœ¨åŒä¸€å±‚è¯­æ³•ç»“æ„ä¸Šæ¢è¡Œ.

**âœ… æ­£ç¡®**:

```python
bridgekeeper.answer(
     name="äºšç‘Ÿ", quest=questlib.find(owner="äºšç‘Ÿ", perilous=True))

 answer = (a_long_line().of_chained_methods()
           .that_eventually_provides().an_answer())

 if (
     config is None
     or 'editor.language' not in config
     or config['editor.language'].use_spaces is False
 ):
   use_tabs()
```

**âŒ é”™è¯¯**:

```python
bridgekeeper.answer(name="äºšç‘Ÿ", quest=questlib.find(
    owner="äºšç‘Ÿ", perilous=True))

answer = a_long_line().of_chained_methods().that_eventually_provides(
    ).an_answer()

if (config is None or 'editor.language' not in config or config[
    'editor.language'].use_spaces is False):
  use_tabs()
```

å¿…è¦æ—¶, æ³¨é‡Šä¸­çš„é•¿ URL å¯ä»¥ç‹¬ç«‹æˆè¡Œ.

**âœ… æ­£ç¡®**:

```python
# è¯¦æƒ…å‚è§
# https://www.example.com/us/developer/documentation/api/content/v2.0/csv_file_name_extension_full_specification.html
```

**âŒ é”™è¯¯**:

```python
# è¯¦æƒ…å‚è§
# https://www.example.com/us/developer/documentation/api/content/\

# v2.0/csv_file_name_extension_full_specification.html     
```

æ³¨æ„ä¸Šé¢å„ä¸ªä¾‹å­ä¸­çš„ç¼©è¿›; è¯¦æƒ…å‚è§ [ç¼©è¿›](#indentation) ç« èŠ‚çš„è§£é‡Š. 

å¦‚æœä¸€è¡Œè¶…è¿‡ 80 ä¸ªå­—ç¬¦, ä¸” [Black](https://github.com/psf/black) æˆ– [Pyink](https://github.com/google/pyink) è‡ªåŠ¨æ ¼å¼åŒ–å·¥å…·æ— æ³•ç»§ç»­ç¼©å‡è¡Œå®½, åˆ™å…è®¸è¯¥è¡Œè¶…è¿‡ 80 ä¸ªå­—ç¬¦. æˆ‘ä»¬ä¹Ÿé¼“åŠ±ä½œè€…æ ¹æ®ä¸Šé¢çš„è§„åˆ™æ‰‹åŠ¨æ‹†åˆ†.
    
## æ‹¬å·

> ğŸ’¡ **æç¤º**: ä½¿ç”¨æ‹¬å·æ—¶å®ç¼ºæ¯‹æ»¥.

å¯ä»¥æŠŠå…ƒç»„ (tuple) æ‹¬èµ·æ¥, ä½†ä¸å¼ºåˆ¶. ä¸è¦åœ¨è¿”å›è¯­å¥æˆ–æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨æ‹¬å·, é™¤éç”¨äºéšå¼ç»­è¡Œ or è¡¨ç¤ºå…ƒç»„.

**âœ… æ­£ç¡®**:

```python    
if foo: 
    bar()
while x:
    x = bar()
if x and y:
    bar()
if not x:
    bar()
# å¯¹äºåŒ…å«å•ä¸ªå…ƒç´ çš„å…ƒç»„, æ‹¬å·æ¯”é€—å·æ›´ç›´è§‚.
onesie = (foo,)
return foo
return spam, beans
return (spam, beans)
for (x, y) in dict.items(): ...
```

**âŒ é”™è¯¯**:

```python
if (x):
    bar()
if not(x):
    bar()
return (foo)
```

<div id="indentation"></div>

## ç¼©è¿›

> ğŸ’¡ **æç¤º**: ç”¨4ä¸ªç©ºæ ¼ä½œä¸ºç¼©è¿›.

ä¸è¦ä½¿ç”¨åˆ¶è¡¨ç¬¦. ä½¿ç”¨éšå¼ç»­è¡Œæ—¶, åº”è¯¥æŠŠæ‹¬èµ·æ¥çš„å…ƒç´ å‚ç›´å¯¹é½(å‚è§ [è¡Œå®½](#line_length) ç« èŠ‚çš„ç¤ºä¾‹), æˆ–è€…æ·»åŠ 4ä¸ªç©ºæ ¼çš„æ‚¬æŒ‚ç¼©è¿›. å³æ‹¬å· (åœ†æ‹¬å·, æ–¹æ‹¬å·æˆ–èŠ±æ‹¬å·) å¯ä»¥ç½®äºè¡¨è¾¾å¼ç»“å°¾æˆ–è€…å¦èµ·ä¸€è¡Œ. å¦èµ·ä¸€è¡Œæ—¶å³æ‹¬å·åº”è¯¥å’Œå·¦æ‹¬å·æ‰€åœ¨çš„é‚£ä¸€è¡Œç¼©è¿›ç›¸åŒ.

**âœ… æ­£ç¡®**:

```python
# ä¸å·¦æ‹¬å·å¯¹é½.
foo = long_function_name(var_one, var_two,
                         var_three, var_four)
meal = (spam,
        beans)

# ä¸å­—å…¸çš„å·¦æ‹¬å·å¯¹é½.
foo = {
    'long_dictionary_key': value1 +
                           value2,
    ...
}

# 4ä¸ªç©ºæ ¼çš„æ‚¬æŒ‚ç¼©è¿›; é¦–è¡Œæ²¡æœ‰å…ƒç´ 
foo = long_function_name(
    var_one, var_two, var_three,
    var_four)
meal = (
    spam,
    beans)

# 4ä¸ªç©ºæ ¼çš„æ‚¬æŒ‚ç¼©è¿›; é¦–è¡Œæ²¡æœ‰å…ƒç´ 
# å³æ‹¬å·å¦èµ·ä¸€è¡Œ.
foo = long_function_name(
    var_one, var_two, var_three,
    var_four
)
meal = (
    spam,
    beans,
)

# å­—å…¸ä¸­çš„4ç©ºæ ¼æ‚¬æŒ‚ç¼©è¿›.
foo = {
    'long_dictionary_key':
        long_dictionary_value,
    ...
}
```

**âŒ é”™è¯¯**:

```python
# é¦–è¡Œä¸èƒ½æœ‰å…ƒç´ .
foo = long_function_name(var_one, var_two,
    var_three, var_four)

# ç¦æ­¢2ä¸ªç©ºæ ¼çš„æ‚¬æŒ‚ç¼©è¿›.
foo = long_function_name(
  var_one, var_two, var_three,
  var_four)

# å­—å…¸æ²¡æœ‰æ‚¬æŒ‚ç¼©è¿›.
foo = {
    'long_dictionary_key':
    long_dictionary_value,
    ...
}
```
         
## åºåˆ—çš„å°¾éƒ¨è¦æ·»åŠ é€—å·å—?

> ğŸ’¡ **æç¤º**: ä»…å½“ `]`, `)`, `}` å’Œæœ€åä¸€ä¸ªå…ƒç´ ä¸åœ¨åŒä¸€è¡Œæ—¶, æ¨èåœ¨åºåˆ—å°¾éƒ¨æ·»åŠ é€—å·. æˆ‘ä»¬çš„ Python è‡ªåŠ¨æ ¼å¼åŒ–å·¥å…·ä¼šæŠŠå°¾éƒ¨çš„é€—å·è§†ä¸ºä¸€ç§æ ¼å¼æç¤º.

## Shebangè¡Œ

> ğŸ’¡ **æç¤º**: å¤§éƒ¨åˆ† `.py` æ–‡ä»¶ä¸å¿…ä»¥ `#!` å¼€å§‹. å¯ä»¥æ ¹æ® [PEP-394](https://www.python.org/dev/peps/pep-0394/) , åœ¨ç¨‹åºçš„ä¸»æ–‡ä»¶å¼€å¤´æ·»åŠ  `#!/usr/bin/env python3` (ä»¥æ”¯æŒ virtualenv) æˆ–è€… `#!/usr/bin/python3`.

(è¯‘è€…æ³¨: åœ¨è®¡ç®—æœºç§‘å­¦ä¸­, [Shebang](https://en.wikipedia.org/wiki/Shebang_(Unix)) (ä¹Ÿç§°ä¸ºHashbang)æ˜¯ä¸€ä¸ªç”±äº•å·å’Œå¹å·æ„æˆçš„å­—ç¬¦ä¸²è¡Œ(#!), å…¶å‡ºç°åœ¨æ–‡æœ¬æ–‡ä»¶çš„ç¬¬ä¸€è¡Œçš„å‰ä¸¤ä¸ªå­—ç¬¦. åœ¨æ–‡ä»¶ä¸­å­˜åœ¨Shebangçš„æƒ…å†µä¸‹, ç±»Unixæ“ä½œç³»ç»Ÿçš„ç¨‹åºè½½å…¥å™¨ä¼šåˆ†æShebangåçš„å†…å®¹, å°†è¿™äº›å†…å®¹ä½œä¸ºè§£é‡Šå™¨æŒ‡ä»¤, å¹¶è°ƒç”¨è¯¥æŒ‡ä»¤, å¹¶å°†è½½æœ‰Shebangçš„æ–‡ä»¶è·¯å¾„ä½œä¸ºè¯¥è§£é‡Šå™¨çš„å‚æ•°.)

å†…æ ¸ä¼šé€šè¿‡è¿™è¡Œå†…å®¹æ‰¾åˆ°Pythonè§£é‡Šå™¨, ä½†æ˜¯Pythonè§£é‡Šå™¨åœ¨å¯¼å…¥æ¨¡å—æ—¶ä¼šå¿½ç•¥è¿™è¡Œå†…å®¹. è¿™è¡Œå†…å®¹ä»…å¯¹éœ€è¦ç›´æ¥è¿è¡Œçš„æ–‡ä»¶æœ‰æ•ˆ.
 
## æ³¨é‡Šå’Œæ–‡æ¡£å­—ç¬¦ä¸² (docstring)

> ğŸ’¡ **æç¤º**: æ¨¡å—ã€å‡½æ•°ã€æ–¹æ³•çš„æ–‡æ¡£å­—ç¬¦ä¸²å’Œå†…éƒ¨æ³¨é‡Šä¸€å®šè¦é‡‡ç”¨æ­£ç¡®çš„é£æ ¼.    

**æ–‡æ¡£å­—ç¬¦ä¸²**

Python çš„æ–‡æ¡£å­—ç¬¦ä¸²ç”¨äºæ³¨é‡Šä»£ç . æ–‡æ¡£å­—ç¬¦ä¸²æ˜¯åŒ…ã€æ¨¡å—ã€ç±»æˆ–å‡½æ•°é‡Œä½œä¸ºç¬¬ä¸€ä¸ªè¯­å¥çš„å­—ç¬¦ä¸². å¯ä»¥ç”¨å¯¹è±¡çš„ `__doc__` æˆå‘˜è‡ªåŠ¨æå–è¿™äº›å­—ç¬¦ä¸², å¹¶ä¸º `pydoc` æ‰€ç”¨. æ–‡æ¡£å­—ç¬¦ä¸²ä¸€å®šè¦ç”¨ä¸‰é‡åŒå¼•å· `"""` çš„æ ¼å¼ (ä¾æ® [PEP-257](https://www.python.org/dev/peps/pep-0257/) ). æ–‡æ¡£å­—ç¬¦ä¸²åº”è¯¥æ˜¯ä¸€è¡Œæ¦‚è¿° (æ•´è¡Œä¸è¶…è¿‡ 80 ä¸ªå­—ç¬¦), ä»¥å¥å·ã€é—®å·æˆ–æ„Ÿå¹å·ç»“å°¾. å¦‚æœè¦å†™æ›´å¤šæ³¨é‡Š (æ¨è), é‚£ä¹ˆæ¦‚è¿°åé¢å¿…é¡»ç´§æ¥ç€ä¸€ä¸ªç©ºè¡Œ, ç„¶åæ˜¯å‰©ä¸‹çš„å†…å®¹, ç¼©è¿›ä¸æ–‡æ¡£å­—ç¬¦ä¸²çš„ç¬¬ä¸€è¡Œç¬¬ä¸€ä¸ªå¼•å·å¯¹é½.

**æ¨¡å—**

æ¯ä¸ªæ–‡ä»¶åº”è¯¥åŒ…å«ä¸€ä¸ªè®¸å¯åè®®æ¨¡ç‰ˆ. åº”æ ¹æ®é¡¹ç›®ä½¿ç”¨çš„è®¸å¯åè®® (ä¾‹å¦‚, Apache 2.0, BSD, LGPL, GPL) é€‰æ‹©åˆé€‚çš„æ¨¡ç‰ˆ.

æ–‡ä»¶çš„å¼€å¤´åº”è¯¥æ˜¯æ–‡æ¡£å­—ç¬¦ä¸², å…¶ä¸­åº”è¯¥æè¿°è¯¥æ¨¡å—å†…å®¹å’Œç”¨æ³•.

```python
"""æ¨¡å—æˆ–ç¨‹åºçš„ä¸€è¡Œæ¦‚è¿°, ä»¥å¥å·ç»“å°¾.

ç•™ä¸€ä¸ªç©ºè¡Œ. æ¥ä¸‹æ¥åº”è¯¥å†™æ¨¡å—æˆ–ç¨‹åºçš„æ€»ä½“æè¿°. ä¹Ÿå¯ä»¥é€‰æ‹©ç®€è¦æè¿°å¯¼å‡ºçš„ç±»å’Œå‡½æ•°,
å’Œ/æˆ–æè¿°ä½¿ç”¨ç¤ºä¾‹.

ç»å…¸çš„ä½¿ç”¨ç¤ºä¾‹:

foo = ClassFoo()
bar = foo.FunctionBar()
"""
```

**æµ‹è¯•æ¨¡å—**

æµ‹è¯•æ–‡ä»¶ä¸å¿…åŒ…å«æ¨¡å—çº§æ–‡æ¡£å­—ç¬¦ä¸². åªæœ‰åœ¨æ–‡æ¡£å­—ç¬¦ä¸²å¯ä»¥æä¾›é¢å¤–ä¿¡æ¯æ—¶æ‰éœ€è¦å†™å…¥æ–‡ä»¶.

ä¾‹å¦‚, ä½ å¯ä»¥æè¿°è¿è¡Œæµ‹è¯•æ—¶æ‰€éœ€çš„ç‰¹æ®Šè¦æ±‚, è§£é‡Šä¸å¸¸è§çš„åˆå§‹åŒ–æ¨¡å¼, æè¿°å¤–éƒ¨ç¯å¢ƒçš„ä¾èµ–ç­‰ç­‰.

```python
"""è¿™ä¸ªblazeæµ‹è¯•ä¼šä½¿ç”¨æ ·æ¿æ–‡ä»¶ï¼ˆgolden filesï¼‰.

è‹¥è¦æ›´æ–°è¿™äº›æ–‡ä»¶, ä½ å¯ä»¥åœ¨ `google3` æ–‡ä»¶å¤¹ä¸­è¿è¡Œ
`blaze run //foo/bar:foo_test -- --update_golden_files`
"""
```

**å‡½æ•°å’Œæ–¹æ³•**
   
æœ¬èŠ‚ä¸­çš„å‡½æ•°æ˜¯æŒ‡å‡½æ•°ã€æ–¹æ³•ã€ç”Ÿæˆå™¨ (generator) å’Œç‰¹æ€§ (property).

æ»¡è¶³ä¸‹åˆ—ä»»æ„ç‰¹å¾çš„ä»»ä½•å‡½æ•°éƒ½å¿…é¡»æœ‰æ–‡æ¡£å­—ç¬¦ä¸²:

1. å…¬å¼€ API çš„ä¸€éƒ¨åˆ†
2. é•¿åº¦è¿‡é•¿
3. é€»è¾‘ä¸èƒ½ä¸€ç›®äº†ç„¶

æ–‡æ¡£å­—ç¬¦ä¸²åº”è¯¥æä¾›å……åˆ†çš„ä¿¡æ¯, è®©è°ƒç”¨è€…æ— éœ€é˜…è¯»å‡½æ•°çš„ä»£ç å°±èƒ½è°ƒç”¨å‡½æ•°. æ–‡æ¡£å­—ç¬¦ä¸²åº”è¯¥æè¿°å‡½æ•°çš„è°ƒç”¨è¯­æ³•å’Œè¯­ä¹‰ä¿¡æ¯, è€Œä¸åº”è¯¥æè¿°å…·ä½“çš„å®ç°ç»†èŠ‚.

æ–‡æ¡£å­—ç¬¦ä¸²å¯ä»¥æ˜¯é™ˆè¿°å¥ (å¦‚ `"""Fetches rows from a Bigtable."""`) æˆ–è€…ç¥ˆä½¿å¥ (å¦‚ `"""Fetch rows from a Bigtable."""`), ä¸è¿‡ä¸€ä¸ªæ–‡ä»¶å†…çš„é£æ ¼åº”å½“ä¸€è‡´.

å‡½æ•°çš„éƒ¨åˆ†ç‰¹å¾åº”è¯¥åœ¨ä»¥ä¸‹åˆ—å‡ºç‰¹æ®Šå°èŠ‚ä¸­è®°å½•. æ¯å°èŠ‚æœ‰ä¸€è¡Œæ ‡é¢˜, æ ‡é¢˜ä»¥å†’å·ç»“å°¾.

**Args: (å‚æ•°:)**
åˆ—å‡ºæ‰€æœ‰å‚æ•°å. å‚æ•°ååé¢æ˜¯ä¸€ä¸ªå†’å·, ç„¶åæ˜¯ä¸€ä¸ªç©ºæ ¼æˆ–è€…æ¢è¡Œç¬¦, æœ€åæ˜¯æè¿°.

**Returns: ("è¿”å›:")**
ç”Ÿæˆå™¨åº”è¯¥ç”¨ "Yields:" ("ç”Ÿæˆ:" )
æè¿°è¿”å›å€¼çš„ç±»å‹å’Œæ„ä¹‰. å¦‚æœå‡½æ•°ä»…ä»…è¿”å› `None`, è¿™ä¸€å°èŠ‚å¯ä»¥çœç•¥.

**Raises: (æŠ›å‡º:)**
åˆ—å‡ºä¸æ¥å£ç›¸å…³çš„æ‰€æœ‰å¼‚å¸¸å’Œå¼‚å¸¸æè¿°.

```python
def fetch_smalltable_rows(
    table_handle: smalltable.Table,
    keys: Sequence[bytes | str],
    require_all_keys: bool = False,
) -> Mapping[bytes, tuple[str, ...]]:
    """ä» Smalltable è·å–æ•°æ®è¡Œ.

    ä» table_handle ä»£è¡¨çš„ Table å®ä¾‹ä¸­æ£€ç´¢æŒ‡å®šé”®å€¼å¯¹åº”çš„è¡Œ. å¦‚æœé”®å€¼æ˜¯å­—ç¬¦ä¸²,
    å­—ç¬¦ä¸²å°†ç”¨ UTF-8 ç¼–ç .

    å‚æ•°:
        table_handle: å¤„äºæ‰“å¼€çŠ¶æ€çš„ smalltable.Table å®ä¾‹.
        keys: ä¸€ä¸ªå­—ç¬¦ä¸²åºåˆ—, ä»£è¡¨è¦è·å–çš„è¡Œçš„é”®å€¼. å­—ç¬¦ä¸²å°†ç”¨ UTF-8 ç¼–ç .
        require_all_keys: å¦‚æœä¸º True, åªè¿”å›é‚£äº›æ‰€æœ‰é”®å€¼éƒ½æœ‰å¯¹åº”æ•°æ®çš„
            è¡Œ.

    è¿”å›:
        ä¸€ä¸ªå­—å…¸, æŠŠé”®å€¼æ˜ å°„åˆ°è¡Œæ•°æ®ä¸Š. è¡Œæ•°æ®æ˜¯å­—ç¬¦ä¸²æ„æˆçš„å…ƒç»„. ä¾‹å¦‚:

        {b'Serak': ('Rigel VII', 'Preparer'),
         b'Zim': ('Irk', 'Invader'),
         b'Lrrr': ('Omicron Persei 8', 'Emperor')}

        è¿”å›çš„é”®å€¼ä¸€å®šæ˜¯å­—èŠ‚ä¸². å¦‚æœå­—å…¸ä¸­æ²¡æœ‰ keys å‚æ•°ä¸­çš„æŸä¸ªé”®å€¼, è¯´æ˜
        è¡¨æ ¼ä¸­æ²¡æœ‰æ‰¾åˆ°è¿™ä¸€è¡Œ (ä¸” require_all_keys ä¸€å®šæ˜¯ false).

    æŠ›å‡º:
        IOError: è®¿é—® smalltable æ—¶å‡ºç°é”™è¯¯.
    """
```

**ç±» (class)**
            
ç±»çš„å®šä¹‰ä¸‹æ–¹åº”è¯¥æœ‰ä¸€ä¸ªæè¿°è¯¥ç±»çš„æ–‡æ¡£å­—ç¬¦ä¸². å¦‚æœä½ çš„ç±»åŒ…å«å…¬æœ‰å±æ€§ (attributes), åº”è¯¥åœ¨ `Attributes` (å±æ€§) å°èŠ‚ä¸­è®°å½•è¿™äº›å±æ€§.

```python
class SampleClass(object):
    """è¿™é‡Œæ˜¯ç±»çš„æ¦‚è¿°.

    å±æ€§:
        likes_spam: å¸ƒå°”å€¼, è¡¨ç¤ºæˆ‘ä»¬æ˜¯å¦å–œæ¬¢åˆé¤è‚‰.
        eggs: ç”¨æ•´æ•°è®°å½•çš„ä¸‹è›‹çš„æ•°é‡.
    """

    def __init__(self, likes_spam = False):
        """ç”¨æŸæŸæŸåˆå§‹åŒ– SampleClass."""
        self.likes_spam = likes_spam
        self.eggs = 0
```

**å—æ³¨é‡Šå’Œè¡Œæ³¨é‡Š**

æœ€åä¸€ç§éœ€è¦å†™æ³¨é‡Šçš„åœ°æ–¹æ˜¯ä»£ç ä¸­å¤æ‚çš„éƒ¨åˆ†. åº”åœ¨å¤æ‚çš„æ“ä½œå¼€å§‹å‰å†™ä¸Šè‹¥å¹²è¡Œæ³¨é‡Š. å¯¹äºä¸æ˜¯ä¸€ç›®äº†ç„¶çš„ä»£ç , åº”è¯¥åœ¨è¡Œå°¾æ·»åŠ æ³¨é‡Š. 

```python
# æˆ‘ä»¬ç”¨åŠ æƒçš„å­—å…¸æœç´¢, å¯»æ‰¾ i åœ¨æ•°ç»„ä¸­çš„ä½ç½®. æˆ‘ä»¬åŸºäºæ•°ç»„ä¸­çš„æœ€å¤§å€¼å’Œæ•°ç»„
# é•¿åº¦, æ¨æ–­ä¸€ä¸ªä½ç½®, ç„¶åç”¨äºŒåˆ†æœç´¢è·å¾—æœ€ç»ˆå‡†ç¡®çš„ç»“æœ.

if i & (i-1) == 0:  # å¦‚æœ i æ˜¯ 0 æˆ–è€… 2 çš„æ•´æ•°æ¬¡å¹‚, åˆ™ä¸ºçœŸ.
```

## æ ‡ç‚¹ç¬¦å·ã€æ‹¼å†™å’Œè¯­æ³•

> ğŸ’¡ **æç¤º**: æ³¨æ„æ ‡ç‚¹ç¬¦å·ã€æ‹¼å†™å’Œè¯­æ³•. æ–‡ç¬”å¥½çš„æ³¨é‡Šæ¯”å·®çš„æ³¨é‡Šæ›´å®¹æ˜“ç†è§£.

## å­—ç¬¦ä¸²

> ğŸ’¡ **æç¤º**: åº”è¯¥ç”¨ [f-string](https://docs.python.org/zh-cn/3/reference/lexical_analysis.html#f-strings)ã€ `%` è¿ç®—ç¬¦æˆ– `format` æ–¹æ³•æ¥æ ¼å¼åŒ–å­—ç¬¦ä¸².

**âœ… æ­£ç¡®**:

```python
x = f'åç§°: {name}; åˆ†æ•°: {n}'
x = '%s, %s!' % (imperative, expletive)
x = '{}, {}'.format(first, second)
x = 'åç§°: %s; åˆ†æ•°: %d' % (name, n)
x = a + b
```

**âŒ é”™è¯¯**:

```python
x = first + ', ' + second
x = 'åç§°: ' + name + '; åˆ†æ•°: ' + str(n)
```

ä¸è¦åœ¨å¾ªç¯ä¸­ç”¨ `+` å’Œ `+=` æ“ä½œç¬¦æ¥å †ç§¯å­—ç¬¦ä¸². å»ºè®®å°†æ¯ä¸ªå­ä¸²åŠ å…¥åˆ—è¡¨, ç„¶ååœ¨å¾ªç¯ç»“æŸåç”¨ `''.join` æ‹¼æ¥.

åº”è¯¥ä¿æŒåŒä¸€æ–‡ä»¶ä¸­å­—ç¬¦ä¸²å¼•å·çš„ä¸€è‡´æ€§. é€‰æ‹© `'` æˆ–è€… `"` ä»¥åä¸è¦æ”¹å˜ä¸»æ„.

å¤šè¡Œå­—ç¬¦ä¸²æ¨èä½¿ç”¨ `"""` è€Œé `'''`.

## æ–‡ä»¶ã€å¥—æ¥å­— (socket) å’Œç±»ä¼¼çš„æœ‰çŠ¶æ€èµ„æº

> ğŸ’¡ **æç¤º**: ä½¿ç”¨å®Œæ–‡ä»¶å’Œå¥—æ¥å­—ä»¥å, æ˜¾å¼åœ°å…³é—­å®ƒä»¬.

æ¨èä½¿ç”¨ ["with"è¯­å¥](https://docs.python.org/zh-cn/3/reference/compound_stmts.html#the-with-statement) ç®¡ç†æ–‡ä»¶å’Œç±»ä¼¼çš„èµ„æº:

```python
with open("hello.txt") as hello_file:
    for line in hello_file:
        print line
```

## TODO (å¾…åŠ) æ³¨é‡Š

> ğŸ’¡ **æç¤º**: åœ¨ä¸´æ—¶ã€çŸ­æœŸå’Œä¸å¤Ÿå®Œç¾çš„ä»£ç ä¸Šæ·»åŠ  TODO (å¾…åŠ) æ³¨é‡Š.

å¾…åŠæ³¨é‡Šä»¥ `TODO` (å¾…åŠ) è¿™ä¸ªå…¨éƒ¨å¤§å†™çš„è¯å¼€å¤´, ç´§è·Ÿç€æ˜¯ç”¨æ‹¬å·æ‹¬èµ·æ¥çš„ä¸Šä¸‹æ–‡æ ‡è¯†ç¬¦.

```python
# TODO(crbug.com/192795): ç ”ç©¶ cpufreq çš„ä¼˜åŒ–.
# TODO(ä½ çš„ç”¨æˆ·å): æäº¤ä¸€ä¸ªè®®é¢˜ (issue), ç”¨ '*' ä»£è¡¨é‡å¤.
```

## å¯¼å…¥ (import) è¯­å¥çš„æ ¼å¼

> ğŸ’¡ **æç¤º**: å¯¼å…¥è¯­å¥åº”è¯¥å„è‡ªç‹¬å ä¸€è¡Œ.

æ­£ç¡®:

```python  
from collections.abc import Mapping, Sequence
import os
import sys
from typing import Any, NewType
```

é”™è¯¯:

```python  
import os, sys
```
    
å¯¼å…¥è¯­å¥åº”è¯¥æŒ‰ç…§å¦‚ä¸‹é¡ºåºåˆ†ç»„, ä»é€šç”¨åˆ°ç‰¹æ®Š:

1. å¯¼å…¥ Python çš„ `__future__`.
2. å¯¼å…¥ Python çš„æ ‡å‡†åº“.
3. å¯¼å…¥ç¬¬ä¸‰æ–¹æ¨¡å—å’ŒåŒ….
4. å¯¼å…¥ä»£ç ä»“åº“ä¸­çš„å­åŒ….

## è¯­å¥

> ğŸ’¡ **æç¤º**: é€šå¸¸æ¯ä¸ªè¯­å¥åº”è¯¥ç‹¬å ä¸€è¡Œ.

æ­£ç¡®:

```python
if foo: bar(foo)
```

é”™è¯¯:

```python
if foo: bar(foo)
else:   baz(foo)
```

## è®¿é—®å™¨ (getter) å’Œè®¾ç½®å™¨ (setter)

> ğŸ’¡ **æç¤º**: åœ¨è®¿é—®å’Œè®¾ç½®å˜é‡å€¼æ—¶, å¦‚æœè®¿é—®å™¨å’Œè®¾ç½®å™¨å¯ä»¥äº§ç”Ÿæœ‰æ„ä¹‰çš„ä½œç”¨æˆ–æ•ˆæœ, åˆ™å¯ä»¥ä½¿ç”¨.

## å‘½å

> ğŸ’¡ **æç¤º**: æ¨¡å—å: `module_name`; ç±»å: `ClassName`; å‡½æ•°å: `function_name`; å¸¸é‡å: `GLOBAL_CONSTANT_NAME`.

æ ¹æ®Pythonä¹‹çˆ¶Guidoçš„å»ºè®®æ‰€åˆ¶å®šçš„è§„èŒƒ:

| ç±»å‹ | å…¬æœ‰ | å†…éƒ¨ |
| :--- | :--- | :--- |
| åŒ… | å°å†™ä¸‹åˆ’çº¿ | |
| æ¨¡å— | å°å†™ä¸‹åˆ’çº¿ | ä¸‹åˆ’çº¿+å°å†™ä¸‹åˆ’çº¿ |
| ç±» | å¤§é©¼å³° | ä¸‹åˆ’çº¿+å¤§é©¼å³° |
| å‡½æ•° | å°å†™ä¸‹åˆ’çº¿ | ä¸‹åˆ’çº¿+å°å†™ä¸‹åˆ’çº¿ |
| å¸¸é‡ | å¤§å†™ä¸‹åˆ’çº¿ | ä¸‹åˆ’çº¿+å¤§å†™ä¸‹åˆ’çº¿ |

## ä¸»ç¨‹åº

> ğŸ’¡ **æç¤º**: ä½ çš„ä»£ç å¿…é¡»åœ¨æ‰§è¡Œä¸»ç¨‹åºå‰æ£€æŸ¥ `if __name__ == '__main__'` .

ä½¿ç”¨ [absl](https://github.com/abseil/abseil-py) æ—¶:

```python
from absl import app

def main(argv):
    ...

if __name__ == '__main__':
    app.run(main)
```

## å‡½æ•°é•¿åº¦

> ğŸ’¡ **æç¤º**: å‡½æ•°åº”è¯¥å°å·§ä¸”ä¸“ä¸€. è‹¥ä¸€ä¸ªå‡½æ•°è¶…è¿‡ 40 è¡Œ, åº”è¯¥è€ƒè™‘æ‹†åˆ†.

## ç±»å‹æ³¨è§£ (type annotation)

**é€šç”¨è§„åˆ™** 

1. ç†Ÿè¯» [PEP-484](https://www.python.org/dev/peps/pep-0484/) .
2. æ— éœ€æ³¨è§£ `__init__` çš„è¿”å›å€¼ (åªèƒ½è¿”å› `None`).
3. è‡³å°‘éœ€è¦æ³¨è§£ä½ çš„å…¬å¼€ API.

**æ¢è¡Œ**

æ·»åŠ ç±»å‹æ³¨è§£å, è‹¥æ‰€æœ‰ä¸œè¥¿å¯ä»¥æŒ¤è¿›ä¸€è¡Œ, ä¹Ÿå¯ä»¥æ¥å—.

```python
def my_method(self, first_var: int) -> int:
    ...
```

è‹¥æœ€åä¸€ä¸ªå‚æ•°åŠ ä¸Šè¿”å›å€¼çš„ç±»å‹æ³¨è§£å¤ªé•¿, ä¹Ÿå¯ä»¥æ¢è¡Œå¹¶æ·»åŠ 4æ ¼ç¼©è¿›.

**NoneType**

å¦‚æœä¸€ä¸ªå˜é‡å¯èƒ½ä¸º `None`, åˆ™å¿…é¡»å£°æ˜. æ¨èä½¿ç”¨ `X | None`.

æ­£ç¡®:

```python
def modern_or_union(a: str | int | None, b: str | None = None) -> str:
    ...
```

**å…ƒç»„è¿˜æ˜¯åˆ—è¡¨**

```python
a: list[int] = [1, 2, 3]
b: tuple[int, ...] = (1, 2, 3)
c: tuple[int, str, float] = (1, "2", 3.5)
```

**æ³›å‹ (generics)**
    
åœ¨æ³¨è§£ç±»å‹æ—¶, å°½é‡ä¸ºæ³›å‹ç±»å‹å¡«å…¥ç±»å‹å‚æ•°. å¦åˆ™, æ³›å‹å‚æ•°é»˜è®¤ä¸º `Any`.
